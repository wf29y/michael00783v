(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e2688"],{"7f25":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t._self._c;return e("page-header-wrapper",{attrs:{breadcrumb:!1}},[e("a-card",{staticStyle:{"margin-bottom":"15px"},attrs:{"body-style":{paddingBottom:0},bordered:!1}},[e("div",{staticClass:"table-page-search-wrapper"},[e("a-form",{attrs:{layout:"inline"}},[e("a-row",{attrs:{gutter:24}},[e("a-col",{attrs:{md:7,sm:24}},[e("a-form-item",{attrs:{label:"规则名称"}},[e("a-input",{attrs:{placeholder:"请输入规则名称"},model:{value:t.queryParam.ruleName,callback:function(e){t.$set(t.queryParam,"ruleName",e)},expression:"queryParam.ruleName"}})],1)],1),e("a-col",{attrs:{md:14,sm:24}},[e("a-button",{attrs:{type:"primary"},on:{click:t.loadData}},[t._v("查询")]),e("a-button",{staticStyle:{"margin-left":"8px"},on:{click:t.reset}},[t._v("重置")])],1),e("a-col",{staticStyle:{"text-align":"right"},attrs:{md:3,sm:24}},[e("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(e){return t.handleAdd()}}},[t._v("新建规则")])],1)],1)],1)],1)]),e("a-card",{attrs:{"body-style":{minHeight:"500px"},bordered:!1}},[e("a-list",{attrs:{grid:{gutter:24,lg:4,md:2,sm:1,xs:1},loading:t.loading,"data-source":t.dataSource},scopedSlots:t._u([{key:"renderItem",fn:function(a){return e("a-list-item",{},[e("a-card",[e("div",{staticStyle:{height:"23px"},attrs:{slot:"title"},slot:"title"},[t._v(t._s(a.ruleName))]),e("a-tag",{directives:[{name:"show",rawName:"v-show",value:a.enable,expression:"item.enable"}],attrs:{slot:"extra",color:"green"},slot:"extra"},[t._v("运行中")]),e("a-row",[e("a-col",{attrs:{span:6}},[e("div",[t._v("数据源：")])]),e("a-col",{attrs:{span:18}},[e("div",[t._v(t._s(t.truncateString(t.getResourceNameStr(a.sourceResourceList),20)))])])],1),e("a-row",[e("a-col",{attrs:{span:6}},[e("div",[t._v("目的资源：")])]),e("a-col",{attrs:{span:18}},[e("div",[t._v(t._s(t.truncateString(t.getResourceNameStr(a.destResourceList),20)))])])],1),e("a",{attrs:{slot:"actions"},on:{click:function(e){return t.handleRuntime(a)}},slot:"actions"},[t._v("详情")]),a.enable?t._e():e("a",{attrs:{slot:"actions"},on:{click:function(e){return t.handleEdit(a)}},slot:"actions"},[t._v("配置")]),e("a-popconfirm",{attrs:{slot:"actions",title:"确定删除此规则?"},on:{confirm:function(){return t.handleDelete(a)}},slot:"actions"},[e("a",{attrs:{href:"javascript:;"}},[t._v("删除")])]),a.enable?e("a",{attrs:{slot:"actions"},on:{click:function(e){return t.enableChange(a)}},slot:"actions"},[t._v("停止")]):e("a",{attrs:{slot:"actions"},on:{click:function(e){return t.enableChange(a)}},slot:"actions"},[t._v("启动")])],1)],1)}}])})],1)],1)},n=[],s=(a("a15b"),a("0fea")),o=a("ca00"),i={name:"RuleList",components:{},data:function(){return{loading:!0,dataSource:[],queryParam:{},url:{list:"/api/rule/list",remove:"/api/rule/remove",update:"/api/rule/update",start:"/api/rule/start",stop:"/api/rule/stop",runtime:"/api/rule/runtime"},truncateString:o["d"]}},mounted:function(){this.loadData()},methods:{handleAdd:function(){this.$router.push({path:"/rule/info/new"})},handleEdit:function(t){this.$router.push({path:"/rule/info/"+t.ruleId})},handleRuntime:function(t){this.$router.push({path:"/rule/runtime/"+t.ruleId})},loadData:function(){var t=this;this.loading=!0,Object(s["c"])(this.url.list,this.queryParam).then((function(e){t.dataSource=e.data,t.loading=!1}))},handleStart:function(t){var e=this;Object(s["c"])(this.url.start,t).then((function(t){200===t.code?(e.$message.success("启动成功"),e.loadData()):e.$message.error("启动失败")}))},handleStop:function(t){var e=this;this.$confirm({title:"停止此规则?",content:t.ruleName,onOk:function(){Object(s["c"])(e.url.stop,t).then((function(t){200===t.code?(e.$message.success("停止成功"),e.loadData()):e.$message.error("停止失败")}))}})},handleDelete:function(t){var e=this;this.$confirm({title:"删除此规则?",content:t.ruleName,okType:"danger",onOk:function(){Object(s["c"])(e.url.remove,t).then((function(t){200===t.code?(e.$message.success("删除成功"),e.loadData()):e.$message.error("删除失败")}))}})},enableChange:function(t){t.enable?this.handleStop(t):this.handleStart(t)},getResourceNameStr:function(t){for(var e=[],a=t.length-1;a>=0;a--)e.push(t[a].resourceName);return e.join(",")},reset:function(){this.queryParam={},this.loadData()}}},l=i,c=a("2877"),u=Object(c["a"])(l,r,n,!1,null,null,null);e["default"]=u.exports}}]);